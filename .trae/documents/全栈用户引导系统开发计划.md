# 全栈用户引导系统开发计划

## 1. 系统架构
本方案采用 Monorepo 结构，包含三个核心部分：
- **SDK (`packages/product-studio`)**: 嵌入到宿主应用中，负责展示引导/通知，以及在编辑模式下提供可视化配置功能。
- **后端服务 (`apps/server`)**: Node.js + Express + Prisma + SQLite（开发环境）。提供 API 用于 App 注册、配置存储与版本管理。
- **管理控制台 (`apps/admin-console`)**: React 应用。用于注册新应用，获取 AppId，查看应用列表。

## 2. 后端服务开发 (`apps/server`)
- [ ] 初始化 Express 项目与 TypeScript 环境
- [ ] 配置 Prisma 与 SQLite 数据库
- [ ] 设计数据库 Schema:
    - `App`: id, name, apiKey, createdAt
    - `Config`: id, appId, version, content (JSON), isActive, createdAt
- [ ] 实现 RESTful API:
    - `POST /api/apps`: 创建应用
    - `GET /api/apps`: 获取应用列表
    - `GET /api/config/:appId`: 获取当前生效配置
    - `POST /api/config/:appId`: 保存新配置

## 3. 管理控制台开发 (`apps/admin-console`)
- [ ] 初始化 React + Vite 项目
- [ ] 实现应用列表页：展示已注册 App，提供"创建应用"按钮
- [ ] 实现应用详情页：展示 AppId，提供集成代码片段（Snippet）
- [ ] 集成 API 调用

## 4. SDK 改造 (`packages/product-studio`)
- [ ] 改造 `Store.tsx`:
    - 移除 LocalStorage 逻辑
    - 添加 API Client，支持从后端拉取配置
    - 实现配置的远程保存
- [ ] 更新 `init` 方法：必须传入 `appId` 和 `apiEndpoint`（或默认生产环境 URL）
- [ ] 优化错误处理与调试日志

## 5. 联调与验证
- [ ] 在 `admin-console` 创建一个新 App
- [ ] 在 `packages/product-studio/index.html` (Playground) 中使用新 AppId 进行初始化
- [ ] 验证配置的保存与读取流程
